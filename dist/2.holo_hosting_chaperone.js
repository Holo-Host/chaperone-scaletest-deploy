(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{2:function(e,t,n){"use strict";(function(e,s,o){var r,i=this&&this.__assign||function(){return(i=Object.assign||function(e){for(var t,n=1,s=arguments.length;n<s;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},a=this&&this.__awaiter||function(e,t,n,s){return new(n||(n=Promise))((function(o,r){function i(e){try{c(s.next(e))}catch(e){r(e)}}function a(e){try{c(s.throw(e))}catch(e){r(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,a)}c((s=s.apply(e,t||[])).next())}))},c=this&&this.__generator||function(e,t){var n,s,o,r,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function a(r){return function(a){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,s&&(o=2&r[0]?s.return:r[0]?s.throw||((o=s.return)&&o.call(s),0):s.next)&&!(o=o.call(s,r[1])).done)return o;switch(s=0,o&&(r=[2&r[0],o.value]),r[0]){case 0:case 1:o=r;break;case 4:return i.label++,{value:r[1],done:!1};case 5:i.label++,s=r[1],r=[0];continue;case 7:r=i.ops.pop(),i.trys.pop();continue;default:if(!(o=i.trys,(o=o.length>0&&o[o.length-1])||6!==r[0]&&2!==r[0])){i=0;continue}if(3===r[0]&&(!o||r[1]>o[0]&&r[1]<o[3])){i.label=r[1];break}if(6===r[0]&&i.label<o[1]){i.label=o[1],o=r;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(r);break}o[2]&&i.ops.pop(),i.trys.pop();continue}r=t.call(e,i)}catch(e){r=[6,e],s=0}finally{n=o=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,a])}}},h=this&&this.__spreadArrays||function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var s=Array(e),o=0;for(t=0;t<n;t++)for(var r=arguments[t],i=0,a=r.length;i<a;i++,o++)s[o]=r[i];return s},u=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};t.__esModule=!0,t.deriveKeys=t.COMB=t.sha256=t.Codec=t.HoloError=t.KeyManager=t.Chaperone=void 0;var l=u(n(38)),d=u(n(25)),g=n(64);t.Codec=g.Codec,t.sha256=g.sha256,t.KeyManager=g.KeyManager;var p=u(n(78)),f=n(79),m=n(86),v=m.HoloError,y=m.RegistrationError,w=m.HostingError,b=m.UserError;t.HoloError=v;var _=n(24),C=_.TimeoutError,S=n(87),I="object"==typeof window&&"Window"===window.constructor.name,E=n(93).COMB;t.COMB=E;var A=n(95),O=e.crypto||window.crypto,H=s.env.RESOLVER_URL||"https://devnet-resolver.holo.host",k="[90mChaperone::console.log( [37m",R={"-32700":"Parse Error","-32600":"Invalid Request","-32601":"Method Not Found","-32602":"Invalid Params","-32603":"Internal Error"};function P(e){return new Promise((function(t){setTimeout(t,e)}))}var M=!1;function D(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];!0===M&&(e=B.fmtargs.apply(B,e),console.log.apply(console,e))}function T(e,t,n){return a(this,void 0,void 0,(function(){var s,o,r,i,a,h;return c(this,(function(c){switch(c.label){case 0:return s={happ_id:e,anonymous:!1,new_agent:n,date:(new Date).toISOString()},o=null,t?(o=g.Codec.AgentId.encode(t.publicKey()),r=g.Codec.Signature.encode(t.publicKey()),s.agent_id=r,D(!0===n?"User expects Resolver to have no record of this Agent (%s) encoded as (%s)":"User expects Resolver to have an existing record of this Agent (%s) encoded as (%s)",o,r)):(D("Getting Hosts for anonymous user because given no agent keys"),s.anonymous=!0),D("POST /resolve/hosts; HOST: %s; BODY: %s;",H,s),[4,fetch(H+"/resolve/hosts",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)})];case 1:switch((i=c.sent()).status){case 200:break;case 403:throw new b("Attempted to sign up but had already signed up");case 404:throw new b("Attempted to sign in but couldn't find agent in resolver");default:throw new v("Unhandled status response ("+i.status+") from resolver /resolve/hosts")}return[4,i.json()];case 2:if(a=c.sent(),D("Resolved hosts for Agent (%s) -> [ %s ]",!o&&s.anonymous?"anonymous":o,a.hosts.map(String).join(", ")),0===a.hosts.length)throw new w("Cannot find a Host for App ("+e+") for "+(t?"Agent ("+o+")":"anonymous Agent"));return u=a.hosts,D("Randomly selected Host: %s",h=u[Math.floor(Math.random()*u.length)]),[2,h]}var u}))}))}function U(e){return a(this,void 0,void 0,(function(){var t,n;return c(this,(function(s){switch(s.label){case 0:if("string"!=typeof e)throw new Error("Bad input: hostname paramater '"+e+"' (type "+typeof e+") must be a string");return[4,fetch(H+"/resolve/happId",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({url:e})})];case 1:switch((t=s.sent()).status){case 200:break;case 404:throw new y("App Hostname ("+e+") is not registered.  Please contact Holo Support to learn about registering a hosted Holochain Application.");default:throw new v("Unhandled status response ("+t.status+") from resolver /resolve/happId")}return[4,t.json()];case 2:return n=s.sent(),D("Resolved Hostname (%s) -> HHA ID (%s)",e,n.happ_id),[2,n.happ_id]}}))}))}function x(e,t,n){return a(this,void 0,void 0,(function(){var s,o,r,i;return c(this,(function(a){switch(a.label){case 0:if(!e||!t)throw new Error("Missing parameter");return s=e.publicKey(),o=(new Date).toISOString(),r={agent_id:g.Codec.Signature.encode(s),host_id:t,date:o},[4,fetch(H+"/update/assignHost",{method:"POST",headers:{"Content-Type":"application/json",Authorization:n({message:r})},body:JSON.stringify(r)})];case 1:return[2,200===(i=a.sent()).status||i.status]}}))}))}var B=function(){function e(t){void 0===t&&(t=e.DEFAULTS),this.anonymous=!0,this.agent_overrides={},this.opened=!1,this.wormhole_ready=!1,this.wormhole_listeners={},this.pending_confirms={},this.opts=Object.assign({},e.DEFAULTS,t),this.opts.connection=Object.assign({},e.DEFAULTS.connection,t.connection),M=this.opts.debug,D("Given configuration: %s",t),D("Final configuration: %s",this.opts),this.port=this.opts.connection.port,this.mode=this.opts.mode,this.COMB=E,this.window=window,!0===this.opts.comb?this.setupCOMBListeners():D("Skipping COMB setup because 'comb' option is set to '%s'",this.opts.comb),this.initializing=this.init(this.opts.timeout)}return e.fmtargs=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return I||("string"==typeof e[0]?e[0]=k+e[0]:e.unshift(k),e.push("[90m)[0m")),e.map((function(e){if("string"!=typeof e)try{return"Object"===e.constructor.name||Array.isArray(e)?JSON.stringify(e,null,4):e}catch(e){}return e}))},e.prototype.alertParent=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return a(this,void 0,void 0,(function(){var n;return c(this,(function(s){if(!0===this.opts.comb){if(!this.parent_window)return[2];D("Emitting '%s' to parent window over message bus with %s args",e,t.length),(n=this.parent_window.msg_bus).emit.apply(n,h(["alert",e],t))}return[2]}))}))},e.prototype.sendSignal=function(e){return a(this,void 0,void 0,(function(){var t;return c(this,(function(n){if(!(t=S.decode(o.from(e,"base64"))).data)throw new v("Received unexpected signal: ",t);return this.signalStore=t.data.payload,D('Chaperone received signal "'+this.signalStore+'" from envoy and is passing it via COMB'),this.parent_window&&this.parent_window.sendSignal(t),[2]}))}))},e.prototype.processCredentials=function(e){return a(this,void 0,void 0,(function(){var t;return c(this,(function(n){switch(n.label){case 0:return D("Processing credentials based on selected behavior: %s",(t=window).expect),"signin"!==t.expect?[3,2]:[4,this.signIn(e.email,e.password)];case 1:return[2,n.sent()];case 2:return"signup"!==t.expect&&console.error(new Error("WARNING: Unknown 'expect' value ("+t.expect+")")),[4,this.signUp(e.email,e.password,e.joiningCode)];case 3:return[2,n.sent()]}}))}))},e.prototype.getCredentials=function(){var e=this;return new Promise((function(t){e.onCredentialsSubmitted((function(n){return a(e,void 0,void 0,(function(){var e;return c(this,(function(s){switch(s.label){case 0:return s.trys.push([0,,2,3]),e=t,[4,this.processCredentials(n)];case 1:return e.apply(void 0,[s.sent()]),[3,3];case 2:return this.setFormIsProcessing(!1),[7];case 3:return[2]}}))}))}))}))},e.prototype.getHhaHash=function(){return a(this,void 0,void 0,(function(){var e,t,n;return c(this,(function(s){switch(s.label){case 0:if(this.hha_hash)return[3,4];e=this.happHost(),s.label=1;case 1:return s.trys.push([1,3,,4]),t=this,[4,U(e)];case 2:return t.hha_hash=s.sent(),[3,4];case 3:throw(n=s.sent()).message.includes("Unhandled status response")&&this.showErrorMessage("Something went wrong. Please wait 30 seconds and try again."),n;case 4:return D("Using Happ ID (%s) from Resolver",this.hha_hash),[2]}}))}))},e.prototype.shouldAgentLogin=function(){var e,t;return a(this,void 0,void 0,(function(){return c(this,(function(n){switch(n.label){case 0:return!1!==this.anonymous||(null===(e=this.localStorage())||void 0===e?void 0:e.getItem("loggedIn"))?[3,3]:(D("Logging out holo client because connection to holo-envoy was lost..."),[4,this.getHhaHash()]);case 1:return n.sent(),[4,this.signOut()];case 2:return n.sent(),[3,4];case 3:if(!1===this.anonymous&&(null===(t=this.localStorage())||void 0===t?void 0:t.getItem("loggedIn")))return D("Aborting request because we already have a derived Agent (anonymous === %s)",this.anonymous),[2,!1];n.label=4;case 4:return[2,!0]}}))}))},e.prototype.processCOMBRequest=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return a(this,void 0,void 0,(function(){var n,s,o,r,i,a,h,u,l;return c(this,(function(c){switch(c.label){case 0:switch(this,n=window,D("Processing COMB request: %s with %s args",e,t.length),e){case"signUp":return[3,1];case"signIn":return[3,4];case"signOut":return[3,7];case"zomeCall":return[3,9];case"appInfo":return[3,14];case"stateDump":return[3,18];case"holoInfo":return[3,21]}return[3,22];case 1:return n.showSignUp(),[4,this.shouldAgentLogin()];case 2:return!1===c.sent()?[2,!1]:[4,this.getCredentials()];case 3:return[2,c.sent()];case 4:return n.showSignIn(),[4,this.shouldAgentLogin()];case 5:return!1===c.sent()?[2,!1]:[4,this.getCredentials()];case 6:return[2,c.sent()];case 7:return D("Sign-out was called"),!0===this.anonymous?(D("Aborting request because we are already in an anonymous state (anonymous === %s)",this.anonymous),[2,!1]):[4,this.signOut()];case 8:return[2,c.sent()];case 9:s=t[0],o=t[1],r=t[2],i=t[3],c.label=10;case 10:return c.trys.push([10,12,,13]),[4,this.callZomeFunction(s,o,r,i)];case 11:return[2,c.sent()];case 12:return[2,{type:"error",payload:{error:(a=c.sent()).name,message:a.message}}];case 13:return[3,23];case 14:return c.trys.push([14,16,,17]),[4,this.getAppInfo()];case 15:return[2,c.sent()];case 16:return[2,{type:"error",payload:{error:(h=c.sent()).name,message:h.message}}];case 17:return[3,23];case 18:return c.trys.push([18,20,,21]),u=t[0],[4,this.getHolochainStateDump(u)];case 19:return[2,c.sent()];case 20:return[2,{type:"error",payload:{error:(l=c.sent()).name,message:l.message}}];case 21:return[2,{url:this.host}];case 22:return[3,23];case 23:return[2]}}))}))},e.prototype.setupCOMBListeners=function(){return a(this,void 0,void 0,(function(){var e,t,n,s=this;return c(this,(function(o){switch(o.label){case 0:if(!this.COMB||"function"!=typeof this.COMB.connect||"function"!=typeof this.COMB.listen)throw D("Unexpected COMB library: %s (type %s)",String(this.COMB),typeof this.COMB),new Error("COMB is not the library we expected");return e={},D("Setting up COMB listeners: '%s'",(t=["signUp","signIn","signOut","zomeCall","appInfo","holoInfo"]).join("', '")),t.map((function(t){e[t]=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return a(s,void 0,void 0,(function(){return c(this,(function(n){switch(n.label){case 0:return D("Received COMB request: %s",t),[4,this.processCOMBRequest.apply(this,h([t],e))];case 1:return[2,n.sent()]}}))}))}})),n=this,[4,this.COMB.listen(e)];case 1:return n.parent_window=o.sent(),D("COMB: parent <-> child handshake is complete, message bus is ready for traffic"),[2]}}))}))},e.prototype.onCredentialsSubmitted=function(e){var t=window,n=t.$,s={$email:n("#email"),$password:n("#password")},o={$email:n("#signup-email"),$password:n("#signup-password"),$confirm:n("#signup-password-confirm"),$confirmFeedback:n("#signup-password-confirm-feedback"),$joiningCode:n("#signup-joining-code")};t.formSubmit=function(n){if(!t.formIsProcessing&&(t.setFormIsProcessing(!0),n.classList.add("has-submitted"),t.validate(n))){var r={email:null,password:null,joiningCode:null};n.matches("#sign-in form")?(r.email=s.$email.val(),r.password=s.$password.val()):n.matches("#sign-up form")&&(r.email=o.$email.val(),r.password=o.$password.val(),r.joiningCode=o.$joiningCode.val()),r.email=r.email.toLowerCase(),e(r),t.resetForms()}}},e.prototype.showErrorMessage=function(e){window.showErrorMessage(e)},e.prototype.setFormIsProcessing=function(e){window.setFormIsProcessing&&window.setFormIsProcessing(e)},e.prototype.init=function(t){var n;return void 0===t&&(t=5e3),a(this,void 0,void 0,(function(){return c(this,(function(s){switch(s.label){case 0:return D("Initializing mode is set to: %s (%s)",this.mode,F[this.mode]),this.mode===e.HCC&&(void 0!==this.opts.web_user_legend?this.agent_overrides=this.opts.web_user_legend:void 0===this.opts.agent_id&&D("WARNING: this Chaperone has no configured users")),this.opts.agent_id?(this.agent_id=this.opts.agent_id,D("Using Agent ID (%s) assigned by Configuration '.agent_id'",this.opts.agent_id)):this.createAgentFromSeed()||this.createAnonymousAgent(),this.mode!==e.DEVELOP&&this.mode!==e.HCC?[3,1]:(this.hha_hash=this.opts.app_id,D("Skipping Resolver Hostname lookup and using configured instance prefix as HHA ID: %s",this.hha_hash),[3,3]);case 1:return[4,this.getHhaHash()];case 2:s.sent(),s.label=3;case 3:if(this.mode===e.HCC&&void 0===this.opts.connection.host){if(!window.location.hostname)throw new Error('Unable to determine hostname "window.location.hostname" is undefined and the no host has been provided in opts.');this.opts.connection.host=window.location.hostname}return!1!==this.anonymous||(null===(n=this.localStorage())||void 0===n?void 0:n.getItem("loggedIn"))?[4,this.connect(!1,t)]:[2];case 4:return s.sent(),[2]}}))}))},e.prototype.connect=function(t,n,s){var o,r,i,h;return void 0===t&&(t=!1),void 0===n&&(n=5e3),void 0===s&&(s=null),a(this,void 0,void 0,(function(){var u,d,g,m,y,_,C,S,I,E,O,H,k,R,M,U,B,F,q,L,j=this;return c(this,(function(N){switch(N.label){case 0:if(D("Begin creation of an RPC WebSocket connection for %s Agent (timeout %s)",t?"new":"existing",n),delete this.cell_dictionary,!0===this.opened)throw new Error("Connection already open, must run '.disconnect()' before starting a new connection.");return this.setFormIsProcessing(!0),this.opts.connection.host?this.mode!==e.HCC?[3,2]:(D("connecting to conductor app interface on port (%s) ",this.port),u=this,[4,f.AppWebsocket.connect("ws://localhost:"+this.port,n,this.sendSignal.bind(this))]):[3,4];case 1:return u.appWebsocket=N.sent(),[3,3];case 2:if(this.mode===e.PRODUCT&&"localhost"===this.opts.connection.host&&void 0===this.opts.host_agent_id)throw new Error("Cannot set 'host' to localhost without also specifying 'host_agent_id' ("+this.opts.host_agent_id+")");N.label=3;case 3:return this.host=this.opts.connection.host,D("Using Host (%s) assigned by Configuration '.connection.host'",this.host),[3,8];case 4:D("Requesting Host to be assigned by Resolver for hha_hash (%s)",this.hha_hash),N.label=5;case 5:return N.trys.push([5,7,,8]),d=this,[4,T(this.hha_hash,!0!==this.anonymous&&this.keys,t)];case 6:return d.host=N.sent(),[3,8];case 7:throw(g=N.sent())instanceof w&&g.message.includes("Cannot find a Host for App")&&this.showErrorMessage("Something went wrong. Please wait 30 seconds and try again."),g instanceof b&&g.message.includes("Attempted to sign up but had already signed up")&&this.showErrorMessage("Could not create account. If you already have an account please login."),g instanceof b&&g.message.includes("Attempted to sign in but couldn't find agent in resolver")&&this.showErrorMessage("Login failed, please check email and password or sign up if you haven't yet"),null===(o=this.localStorage())||void 0===o||o.removeItem("seed"),(null===(r=this.localStorage())||void 0===r?void 0:r.getItem("loggedIn"))&&this.localStorage().removeItem("loggedIn"),g;case 8:return m=this.host,y=this.opts.connection.path,_=!0===this.opts.connection.secure?"wss":"ws",C=_+"://"+m+":"+this.port+y+"?anonymous="+this.anonymous+"&agent_id="+encodeURIComponent(this.agent_id)+"&hha_hash="+encodeURIComponent(this.hha_hash),D("Create client to Host (%s://%s:%s%s) with connections settings: anonymous=%s agent_id=%s hha_hash=%s",_,m,this.port,y,this.anonymous,this.agent_id,this.hha_hash),2500,S=null,this.conn=new l.default(C,{autoconnect:!0,reconnect:!0,reconnect_interval:2500,max_reconnects:0}),I=function(e,t){clearTimeout(e.pingTimeout),e.pingTimeout=setTimeout((function(){D("About to close websocket because socket connection has timed out"),e.close()}),t)},E=function(){I(j.conn,P)},this.conn.on("ping",(function(){E()})),this.conn.on("close",(function(){var e;D("WEBSOCKET TO ENVOY IS CLOSING. Ready state:",null===(e=j.websocket())||void 0===e?void 0:e.readyState),clearTimeout(S),D("Clearing connection keep alive timeout"),clearTimeout(j.conn.pingTimeout),S=setTimeout(j.alertDisconnected.bind(j),5e3)})),O=this.agent_id,H=!1,k=!1,this.conn.on("error",(function(e){var t;j.agent_id===O&&(D("WEBSOCKET TO ENVOY HAS ERROR. (%s) Ready state:",A.inspect(e),null===(t=j.websocket())||void 0===t?void 0:t.readyState),j.alertDisconnected(),j.anonymous?H||(H=!0,j.signOut()):k||(j.showErrorMessage("Could not connect. Please try again later."),k=!0))})),[4,this.conn.opened(n)];case 9:if(N.sent(),this.opened=!0,this.conn.on("open",(function(){return a(j,void 0,void 0,(function(){var n,s;return c(this,(function(o){switch(o.label){case 0:return D("WEBSOCKET TO ENVOY IS OPENING. Ready state:",null===(s=this.websocket())||void 0===s?void 0:s.readyState),clearTimeout(S),E(),this.alertConnected(),this.mode===e.HCC?[3,3]:[4,this.handleWormholeRequests()];case 1:return o.sent(),!1!==this.anonymous?[3,3]:(D("Subscribing to event "+(n=this.createEventId())),this.conn.subscribe(n),D("Attempting sign in following ws opening..."),[4,this._signIn(m,t)]);case 2:o.sent(),o.label=3;case 3:return[2]}}))}))})),this.mode!==e.HCC&&(D("Subscribing to event "+(R=this.createEventId())),this.conn.subscribe(R),this.conn.on(R,(function(e){return j.sendSignal(e)}))),this.mode===e.HCC)return D("Skipping wormhole setup because we are in development mode (HCC)"),this.wormhole_ready=!0,[2];if(!1!==this.anonymous)return[3,23];N.label=10;case 10:return N.trys.push([10,21,,23]),[4,this.handleWormholeRequests()];case 11:return N.sent(),M=[this.hha_hash,this.agent_id],t?(D("Calling '%s' because Agent wants to sign-up (new_agent == %s)","holo/agent/signup",t),s&&(D("Agent (%s) is calling '%s' with joiningCode (%s) as membrane_proof",t,"holo/agent/signup",s),M.push(s)),[4,this.conn.call("holo/agent/signup",M)]):[3,18];case 12:return U=N.sent(),B=p.default.parse(U),(F=B.value()).message&&F.message.includes("AppAlreadyInstalled")?(D("App cell already exists for this user, switching to sign in: %s",U),[4,this._signIn(m,!1)]):[3,14];case 13:return N.sent(),[3,15];case 14:if(!0!==F)throw D("Sign-up returned a non-success response: %s",U),null===(i=this.localStorage())||void 0===i||i.removeItem("seed"),(null===(h=this.localStorage())||void 0===h?void 0:h.getItem("loggedIn"))&&this.localStorage().removeItem("loggedIn"),"error"===B.type?(D("sign_up_result.name (%s)",F.name),D("sign_up_result.message (%s)",F.message.toString()),"invalid joining code"===F.message.toLowerCase()?this.showErrorMessage("Invalid joining code. Please check and try again."):"missing membrane proof"===F.message.toLowerCase()?this.showErrorMessage("Please provide a joining code."):this.showErrorMessage("Signup failed, please try again later. If the problem persists contact support."),D("throwing error back to web client: UserError - %s",F.message),new b(F.message)):(this.showErrorMessage("Signup failed, please try again later. If the problem persists contact support."),new v("Failed to sign-up"));N.label=15;case 15:return this.mode!==e.PRODUCT?[3,17]:(D("Alerting Resolver (via /assignHost) to new Host (%s) for Agent ID (%s)",m,this.agent_id),[4,x(this.keys,m,this.getSignature.bind(this))]);case 16:if(!0!==(q=N.sent()))throw D("Resolver returned a non-success response: %s",q),new v("Failed to save assignedHost");D("Resolver successfully assigned Host (%s) to Agent (%s)",m,this.agent_id),N.label=17;case 17:return this.alertParent("signup"),[3,20];case 18:return[4,this._signIn(m,t)];case 19:N.sent(),N.label=20;case 20:return[3,23];case 21:return L=N.sent(),D("Sign-in/up failed with: %s",String(L)),[4,this.signOut()];case 22:throw N.sent(),L;case 23:return this.alertConnected(),D("Connection sequence is complete"),this.setFormIsProcessing(!1),[2]}}))}))},e.prototype.disconnect=function(){return a(this,void 0,void 0,(function(){var e;return c(this,(function(t){switch(t.label){case 0:if(D("Disconnecting from Host (%s)",this.host),!this.conn)return[3,4];this.conn.reconnect=!1,this.conn.max_reconnects=1,this.conn.close(),t.label=1;case 1:return t.trys.push([1,3,,4]),[4,this.conn.closed(15e3)];case 2:return t.sent(),[3,4];case 3:if(!((e=t.sent())instanceof C))throw e;return D("Timed out waiting for socket to close"),[3,4];case 4:return D("Setting state to closed and not ready"),this.opened=!1,this.wormhole_ready=!1,this.alertParent("disconnected"),[2]}}))}))},e.prototype.alertDisconnected=function(){var e;1!==(null===(e=this.websocket())||void 0===e?void 0:e.readyState)&&this.alertParent("disconnected")},e.prototype.alertConnected=function(){var e;1===(null===(e=this.websocket())||void 0===e?void 0:e.readyState)&&this.alertParent("connected")},e.prototype.ready=function(e){return void 0===e&&(e=5e3),a(this,void 0,void 0,(function(){var t,n=this;return c(this,(function(s){switch(s.label){case 0:D("Started waiting for Chaperone ready state (timeout %s)",e),s.label=1;case 1:return s.trys.push([1,,3,4]),[4,_((function(){return a(n,void 0,void 0,(function(){var e=this;return c(this,(function(n){return[2,new Promise((function(n,s){e.initializing.catch(s);var o=1;t=setInterval((function(){return a(e,void 0,void 0,(function(){var e;return c(this,(function(s){if(e=o,this.conn&&(o=2),!0===this.opened&&(o=3),!0!==this.opened||!0!==this.anonymous&&!0!==this.wormhole_ready||(o=4),o===e)return 4===e&&clearInterval(t),[2];switch(o){case 1:D("Ready state %s - Chaperone's client has not been created yet",o);break;case 2:D("Ready state %s - Client connection is incomplete (%s)",o,this.conn.readyState);break;case 3:D("Ready state %s - Wormhole is not ready",o);break;case 4:D("Ready state %s - Connection to Host (%s) is ready for App traffic",o,this.host),n(this)}return[2]}))}))}),100)}))]}))}))}),e)];case 2:return[2,s.sent()];case 3:return clearInterval(t),[7];case 4:return[2]}}))}))},e.prototype.wormholeRequest=function(e){var t=this;return new Promise((function(n,s){t.wormhole_listeners[e]=[n,s]}))},e.prototype.handleWormholeRequests=function(){return a(this,void 0,void 0,(function(){var e,t,n,s=this;return c(this,(function(o){switch(o.label){case 0:D("Begin wormhole setup for Agent %s",this.agent_id),o.label=1;case 1:return o.trys.push([1,3,,4]),[4,this.conn.call("holo/wormhole/event",[this.agent_id])];case 2:return e=o.sent(),[3,4];case 3:if((t=o.sent()).message.includes("unknown to this host"))return[2,D("WARNING: this host does not know this Agent identity. Sign-up must be the next call.")];throw console.error("Error in creating wormhole event",t),new v("RPC Error: "+JSON.stringify(t));case 4:if("string"!=typeof e)throw D("Unexpected Envoy endpoint type '%s'.  Expected type 'string'",typeof e),"HoloError"===e.name?new v(e.message):new v("Unexpected response from Host: "+JSON.stringify(e));return D("Unique Envoy endpoint for signing requests: %s",e),D("Subscribe RPC WebSocket to unique endpoint (%s)",e),[4,this.conn.subscribe(e)];case 5:return o.sent(),n=function(e,t){return a(s,void 0,void 0,(function(){var n,s,o,r;return c(this,(function(i){switch(i.label){case 0:return D("WORMHOLE #%s: received message length %s",e,t.length),n=this.getSignature(t),D("WORMHOLE #%s: sending signature %s",e,n),[4,this.conn.call("holo/wormhole/response",[e,n])];case 1:return!0!==(s=i.sent())&&console.error("%s returned non-success response: %s","holo/wormhole/response",s),void 0!==this.wormhole_listeners[e]&&(D("Calling listener for wormhole #%s with signature (type %s) and data (type %s)",e,typeof n,typeof t),o=this.wormhole_listeners[e],r=o[0],o[1],r([n,t])),delete this.wormhole_listeners[e],[2]}}))}))},this.conn.listeners(e).includes(n)||(D("Attach listener for wormhole requests"),this.conn.on(e,n)),D("Wormhole setup is complete and listening for Envoy events @ %s",e),this.wormhole_ready=!0,[2]}}))}))},e.prototype.createAnonymousAgent=function(){try{this.seed=function(e){if(void 0===e&&(e=32),I){var t=new Uint8Array(e);return window.crypto.getRandomValues(t),t}return O.randomBytes(e)}(32),this.keys=new g.KeyManager(this.seed),this.agent_id=g.Codec.AgentId.encode(this.keys.publicKey()),D("Created anonymous Agent %s from random bytes",this.agent_id),this.anonymous=!0}catch(e){D("Failed to create anonymous Agent: %s",String(e)),console.error(e)}},e.prototype.createAgentFromSeed=function(){var t,n=null===(t=this.localStorage())||void 0===t?void 0:t.getItem("seed");if(!n)return!1;if(D("Found locally saved session (seed): %s",n),this.mode===e.HCC&&n in this.agent_overrides)return this.agent_id=this.agent_overrides[n],this.anonymous=!1,D("Using Agent overrides from configuration to set Agent ID (%s)",this.agent_id),!0;try{var s=g.Codec.Digest.decode(n);return this.seed=s,this.keys=new g.KeyManager(this.seed),this.agent_id=g.Codec.AgentId.encode(this.keys.publicKey()),D("Created Agent %s from stored seed (%s)",this.agent_id,s),this.anonymous=!1,!0}catch(e){return D("Failed to create Agent from seed: %s",String(e)),console.error(e),!1}},e.prototype.deriveAgent=function(e,t){var n,s;if(D("Derive Agent from email/password (%s/******)",e),e in this.agent_overrides)return this.agent_id=this.agent_overrides[e],this.anonymous=!1,D("Used Agent overrides for email (%s) to set Agent ID (%s)",e,this.agent_id),void(null===(n=this.localStorage())||void 0===n||n.setItem("seed",e));if(this.opts.agent_id)return D("Skipping derive Agent because Configuration set '.agent_id' to %s",this.opts.agent_id),void(this.anonymous=!1);try{D("Derive seed from HHA ID / email / password: %s / %s / ******",this.hha_hash,e),this.seed=o.from(g.deriveSeedFrom(g.Codec.HoloHash.decode(this.hha_hash),e,t)),null===(s=this.localStorage())||void 0===s||s.setItem("seed",g.Codec.Digest.encode(this.seed)),this.keys=new g.KeyManager(this.seed),this.agent_id=g.Codec.AgentId.encode(this.keys.publicKey()),D("Derived Agent ID: %s",this.agent_id),this.anonymous=!1}catch(e){D("Failed to create derived Agent: %s",String(e)),console.error(e)}},e.prototype.getAppInfo=function(){return a(this,void 0,void 0,(function(){var t,n;return c(this,(function(s){switch(s.label){case 0:return[4,this.ready()];case 1:return s.sent(),t=this.anonymous?this.hha_hash:this.hha_hash+":"+this.agent_id,this.mode!==e.HCC?[3,2]:[2,this.appWebsocket.appInfo({installed_app_id:this.hha_hash},5e3)];case 2:return[4,this.conn.call("holo/app_info",{installed_app_id:t})];case 3:if("success"===(n=s.sent()).type)return[2,n.payload];throw console.error("Error while calling envoy app_info: "+p.default.parse(n)),new Error("Error while calling envoy app_info: "+p.default.parse(n));case 4:return[2]}}))}))},e.prototype.populateCellData=function(){return a(this,void 0,void 0,(function(){var e,t,n,s;return c(this,(function(o){switch(o.label){case 0:return[4,this.getAppInfo()];case 1:return e=o.sent(),t=e.cell_data,n=t.map((function(e){var t,n=e.cell_id;return(t={})[e.cell_nick]=n,t})),s=n.reduce((function(e,t,n){return i(i({},e),t[0])})),this.cell_dictionary=s,[2,s]}}))}))},e.prototype.getHolochainStateDump=function(t){return a(this,void 0,void 0,(function(){var n,s;return c(this,(function(o){switch(o.label){case 0:if(this.mode!=e.HCC)return[3,1];throw new Error("state dump is not implemented for HCC mode");case 1:return n=this.anonymous?this.hha_hash:this.hha_hash+":"+this.agent_id,[4,this.conn.call("holo/tmp/state_dump",{installed_app_id:n,dna_alias:t})];case 2:if("success"===(s=o.sent()).type)return[2,s.payload];throw new Error("Error while calling envoy state_dump: "+p.default.parse(s));case 3:return[2]}}))}))},e.prototype.signUp=function(e,t,n,s){var o,r=(void 0===s?{}:s).timeout,i=void 0===r?5e3:r;return a(this,void 0,void 0,(function(){return c(this,(function(s){switch(s.label){case 0:return D("Sign-up with %s/****** (timeout %s)",e,i),this.deriveAgent(e,t),[4,this.disconnect()];case 1:return s.sent(),[4,this.connect(!0,i,n)];case 2:return s.sent(),null===(o=this.localStorage())||void 0===o||o.setItem("loggedIn",!0),[2,!1===this.anonymous]}}))}))},e.prototype.signIn=function(e,t,n){var s,o=(void 0===n?{}:n).timeout,r=void 0===o?5e3:o;return a(this,void 0,void 0,(function(){return c(this,(function(n){switch(n.label){case 0:return D("Sign-in with %s/****** (timeout %s)",e,r),this.deriveAgent(e,t),[4,this.disconnect()];case 1:return n.sent(),[4,this.connect(!1,r)];case 2:return n.sent(),null===(s=this.localStorage())||void 0===s||s.setItem("loggedIn",!0),[2,!1===this.anonymous]}}))}))},e.prototype._signIn=function(e,t){var n,s;return a(this,void 0,void 0,(function(){var o,r,i,a;return c(this,(function(c){switch(c.label){case 0:D("Calling '%s' because Agent wants to sign in (new_agent == %s)","holo/agent/signin",t),c.label=1;case 1:return c.trys.push([1,3,,4]),[4,this.conn.call("holo/agent/signin",[this.hha_hash,this.agent_id])];case 2:if(o=c.sent(),r=p.default.parse(o),!0!==(i=r.value())){if(D("Sign in returned a non-success response: %s",o),null===(n=this.localStorage())||void 0===n||n.removeItem("seed"),(null===(s=this.localStorage())||void 0===s?void 0:s.getItem("loggedIn"))&&this.localStorage().removeItem("loggedIn"),"error"===r.type)throw new b(i.message);throw new v("Failed to sign-in")}return D("Sign-in returned a success response"),this.alertParent("signin"),[3,4];case 3:throw(a=c.sent()).message.toLowerCase().includes("unknown to this host")?new v("Wrong Host.  Host "+e+" cannot locate instance of "+this.hha_hash+" app for agent "+this.agent_id):(window.showErrorMessage("Login failed, please check email and password or sign up if you haven't yet"),new v("Sign In Error: "+JSON.stringify(a)));case 4:return[2]}}))}))},e.prototype.signOut=function(e){var t,n,s=(void 0===e?{}:e).timeout,o=void 0===s?5e3:s;return a(this,void 0,void 0,(function(){return c(this,(function(e){switch(e.label){case 0:return D("Signing-out current Agent %s (timeout %s)",this.agent_id,o),null===(t=this.localStorage())||void 0===t||t.removeItem("seed"),(null===(n=this.localStorage())||void 0===n?void 0:n.getItem("loggedIn"))&&this.localStorage().removeItem("loggedIn"),[4,this.disconnect()];case 1:return e.sent(),this.alertParent("signout"),this.createAnonymousAgent(),this.connect(!1,o),D("Sign-Out sequence is complete"),[2,!0===this.anonymous]}}))}))},e.prototype.getCellId=function(e){return a(this,void 0,void 0,(function(){var t;return c(this,(function(n){if(!this.cell_dictionary)throw new Error("cell_data is undefined");if(!(t=this.cell_dictionary[e]))throw new Error("No cell_id corresponding with "+e);return[2,t]}))}))},e.prototype.callZomeFunction=function(t,n,s,r){return a(this,void 0,void 0,(function(){var i,a,h,u,l,d,g,f,m,y,w,b,_,C;return c(this,(function(c){switch(c.label){case 0:return D("Initializing zome function call: %s : %s -> %s",t,n,s),[4,this.ready()];case 1:return c.sent(),this.cell_dictionary?[3,3]:[4,this.populateCellData()];case 2:c.sent(),c.label=3;case 3:return[4,this.getCellId(t)];case 4:return i=c.sent(),D("Zome call args that chaperone gets",r),a={cell_id:i,dna_alias:t,zome:n,function:s,args:this.mode===e.HCC?r:o.from(S.encode(r)).toString("base64")},this.mode!==e.HCC?[3,6]:[4,this.localCallZome(a)];case 5:return[2,c.sent()];case 6:return a.hha_hash=this.hha_hash,D("Added timestamp (%s) and Host ID (%s) to payload",(h={timestamp:[Math.floor((new Date).getTime()/1e3),0],host_id:this.hostId(),call_spec:a}).timestamp,h.host_id),[4,this.requestServiceSignature(h)];case 7:u=c.sent(),l={anonymous:this.anonymous,agent_id:this.agent_id,payload:h,service_signature:u},D("Attached payload signature (%s) from Agent (%s)",u,this.agent_id),c.label=8;case 8:return c.trys.push([8,10,,11]),D("Sending request signature %s to Envoy",u),D("Zome call args that envoy will see",S.decode(o.from(l.payload.call_spec.args,"base64"))),[4,this.conn.call("holo/call",l)];case 9:return d=c.sent(),[3,11];case 10:throw g=c.sent(),f=void 0,console.error(g),f=g instanceof Error?String(g):void 0!==R[g.code]?R[g.code]+" ("+g.code+"): "+g.message:g.code<=-32e3&&g.code>-32100?g.message+" -> "+(g.data?JSON.stringify(g.data):"(no err.data available)"):"'holo/call' error: Error type unknown: "+g.constructor.name,new v(f);case 11:return m=p.default.parse(d),y=m.value(),w=m.metadata("response_id"),b=m.metadata("host_response"),"error"===m.type?(D("Received error response from Envoy: %s",m),D("Forwarding on error pack to client"),[2,m]):(_=y.zomeCall_response,D("Schedule service confirmation for response (%s) initiated by request (%s)",w,u),[4,this.sendServiceConfirmation(w,b).catch((function(e){if(e instanceof Error)throw D("Received error response from Envoy: %s",e),e;D("Service confirmation failed for request %s: %s",u,String(e)),console.error(e)}))]);case 12:return"error"===c.sent().type&&D("Returning non-successful result for request to web client: %s",u),C=S.decode(o.from(_,"base64")),D("Returning successful result (type %s) for request %s",typeof y,u),[2,C]}}))}))},e.prototype.localCallZome=function(e){return a(this,void 0,void 0,(function(){var t,n,s;return c(this,(function(o){switch(o.label){case 0:D("Calling Conductor directly because we are in development mode (HCC)"),t={cell_id:e.cell_id,zome_name:e.zome,fn_name:e.function,provenance:g.Codec.AgentId.decodeToHoloHash(this.agent_id),payload:e.args},o.label=1;case 1:return o.trys.push([1,3,,4]),[4,this.appWebsocket.callZome(t,5e3)];case 2:return n=o.sent(),console.log("zome call returned",n),[2,n];case 3:throw s=o.sent(),console.log("zome call errored",s),s;case 4:return[2]}}))}))},e.prototype.sendServiceConfirmation=function(e,t){return a(this,void 0,void 0,(function(){var n,s,o,r,i,a,h,u;return c(this,(function(c){switch(c.label){case 0:return this.pending_confirms[e]=!0,n=this.signPayload(t.response_hash),D("Added pending confirmation to list for response (%s) with response signature: %s",e,n),t.signed_response_hash=n,[4,this.requestDigest(t)];case 1:return s=c.sent(),o={response_digest:s,metrics:{response_received:[165303,0]}},r=this.signPayload(o),i={confirmation:o,confirmation_signature:r},D("Sending confirmation payload with response signature (%s) and confirmation signature (%s)",n,r),[4,this.conn.call("holo/service/confirm",[e,n,i])];case 2:if(a=c.sent(),delete this.pending_confirms[e],h=p.default.parse(a),u=h.value(),"error"===h.type)return D("%s returned non-success response","holo/service/confirm"),D("forwarding error response to web client: %s",h),[2,h];if(!0!==u)throw a.error&&"HoloError"===a.error.name?new v(a.error.message):new Error(a.error);return D("Completed pending confirmation (%s)",e),[2,h]}}))}))},e.prototype.close=function(){return a(this,void 0,void 0,(function(){return c(this,(function(e){switch(e.label){case 0:return[4,this.disconnect()];case 1:return e.sent(),[2]}}))}))},e.prototype.websocket=function(){return this.opened||D("WARN: Returned WebSocket is not open and may be replaced by rpc-websocket library once open"),I?this.conn.socket.socket:this.conn.socket},e.prototype.agentId=function(){if("string"!=typeof this.agent_id)throw new Error("Agend ID should be a string starting with uhCAk.  Found '"+this.agent_id+"' (type "+typeof this.agent_id+")");return!0===this.anonymous?"anonymous":this.agent_id},e.prototype.hostId=function(){if(this.opts.host_agent_id)return D("Returning Host ID (%s) assigned by Configuration '.host_agent_id'",this.opts.host_agent_id),this.opts.host_agent_id;var e=this.host.split("."),t=g.Codec.AgentId.encode(g.Codec.Base36.decode(e[0]));return D("Using Host ID (%s) found in URI subdomain (%s)",t,this.host),t},e.prototype.happHost=function(){try{var e=window.location!=window.parent.location?document.referrer:document.location.href;return D("Returing host from URL: %s",e),new URL(e).host}catch(e){D("Failed to determine App host: %s",String(e)),console.error(e)}},e.prototype.getSignature=function(e){var t;"string"==typeof e?(t=g.Codec.Signature.decode(e),D("Decoded base64 message (length %s) into bytes (length %s)",e.length,t.length)):t="Buffer"===e.type?o.from(e.data):S.encode(e);var n=this.keys.sign(t),s=g.Codec.Signature.encode(n);return D("Signature (%s) for message bytes <%s...%s>",s,t.slice(0,4).join(", "),t.slice(-4).join(", ")),s},e.prototype.requestServiceSignature=function(e){return a(this,void 0,void 0,(function(){var t,n,s;return c(this,(function(o){switch(o.label){case 0:return t=JSON.parse(JSON.stringify(e)),[4,this.requestDigest(t.call_spec.args)];case 1:return D("Added 'args' hash (%s) to call spec",n=o.sent()),D("Signing request pack: %s",s={call_spec:{args_hash:n,function:t.call_spec.function,zome:t.call_spec.zome,dna_alias:t.call_spec.dna_alias,hha_hash:t.call_spec.hha_hash},host_id:t.host_id,timestamp:t.timestamp}),[2,this.signPayload(s)]}}))}))},e.prototype.signPayload=function(e){var t;D("Serialized message and converted to bytes (length %s); data[0..10]: %s",(t=S.encode(e)).length,String(e).slice(0,10));var n=this.keys.sign(t);return D("Signature (%s) for message bytes <%s...%s>",n,t.slice(0,4).join(", "),t.slice(-4).join(", ")),g.Codec.Signature.encode(n)},e.prototype.requestDigest=function(e){return a(this,void 0,void 0,(function(){var t,n,s;return c(this,(function(r){switch(r.label){case 0:return t="string"==typeof e?e:d.default(e),s=(n=g.Codec.Digest).encode,[4,g.sha256(o.from(t,"utf8"))];case 1:return[2,s.apply(n,[r.sent()])]}}))}))},e.prototype.createEventId=function(){return"signal:"+this.agent_id+":"+this.hha_hash},e.prototype.localStorage=function(){try{return this.window.localStorage}catch(e){return null}},e.PRODUCT=0,e.DEVELOP=1,e.HCC=2,e.DEFAULTS={mode:e.PRODUCT,timeout:5e3,debug:!1,comb:!0,connection:{port:4656,secure:!1,path:"/hosting/"}},e.COMB=E,e}();t.Chaperone=B;var F=((r={})[B.HCC]="HCC",r[B.DEVELOP]="DEVELOP",r[B.PRODUCT]="PRODUCT",r);t.deriveKeys=function(e,t,n){var s=o.from(g.deriveSeedFrom(g.Codec.HoloHash.decode(e),t,n));return new g.KeyManager(s)}}).call(this,n(7),n(8),n(3).Buffer)},24:function(e,t){class n extends Error{constructor(e,t,...s){super(e),Error.captureStackTrace&&Error.captureStackTrace(this,n),this.name="TimeoutError",this.timeout=t}}function s(e,t=2e3){return new Promise(async(s,o)=>{const r=setTimeout(()=>{o(new n("Waited for "+t/1e3+" seconds",t))},t);try{s(await e())}catch(e){o(e)}finally{clearTimeout(r)}})}s.TimeoutError=n,e.exports=s},38:function(e,t,n){const s=n(39).Client,o=n(24),{TimeoutError:r}=o;e.exports=class extends s{opened(e=2e3){return o(()=>new Promise((e,t)=>this.on("open",e)),e)}closed(e=2e3){return o(()=>new Promise((e,t)=>this.on("close",()=>{e()})),e)}}},64:function(e,t,n){"use strict";(function(e){var s=this&&this.__awaiter||function(e,t,n,s){return new(n||(n=Promise))((function(o,r){function i(e){try{c(s.next(e))}catch(e){r(e)}}function a(e){try{c(s.throw(e))}catch(e){r(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,a)}c((s=s.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var n,s,o,r,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function a(r){return function(a){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,s&&(o=2&r[0]?s.return:r[0]?s.throw||((o=s.return)&&o.call(s),0):s.next)&&!(o=o.call(s,r[1])).done)return o;switch(s=0,o&&(r=[2&r[0],o.value]),r[0]){case 0:case 1:o=r;break;case 4:return i.label++,{value:r[1],done:!1};case 5:i.label++,s=r[1],r=[0];continue;case 7:r=i.ops.pop(),i.trys.pop();continue;default:if(!(o=i.trys,(o=o.length>0&&o[o.length-1])||6!==r[0]&&2!==r[0])){i=0;continue}if(3===r[0]&&(!o||r[1]>o[0]&&r[1]<o[3])){i.label=r[1];break}if(6===r[0]&&i.label<o[1]){i.label=o[1],o=r;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(r);break}o[2]&&i.ops.pop(),i.trys.pop();continue}r=t.call(e,i)}catch(e){r=[6,e],s=0}finally{n=o=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,a])}}};t.__esModule=!0,t.deriveSeedFrom=t.KeyManager=t.sha256=t.Codec=void 0;var r=n(65);t.Codec=r.Codec,t.KeyManager=r.KeyManager,t.deriveSeedFrom=r.deriveSeedFrom;t.sha256=function(t){return s(void 0,void 0,void 0,(function(){var n,s;return o(this,(function(o){switch(o.label){case 0:return void 0!==crypto.subtle?[3,1]:[2,crypto.createHash("sha256").update(t).digest()];case 1:return s=(n=e).from,[4,crypto.subtle.digest("SHA-256",t)];case 2:return[2,s.apply(n,[o.sent()])]}}))}))}}).call(this,n(3).Buffer)},86:function(e,t){class n extends Error{constructor(...e){super(...e),Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor),this.name=this.constructor.name}[Symbol.toPrimitive](e){return"number"===e?null:this.toString()}toString(){return`[${this.constructor.name}( ${this.message} )]`}toJSON(e=!1){return{error:this.name,message:this.message,stack:!0===e?"string"==typeof this.stack?this.stack.split("\n"):this.stack:void 0}}}class s extends n{}e.exports={HoloError:class extends n{},AppError:s,RegistrationError:class extends s{},HostingError:class extends s{},UserError:class extends n{}}}}]);